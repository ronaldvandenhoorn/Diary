<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>My Diary</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#2a7ae2">

<style>
:root {
color-scheme: light dark;
--bg: #f8f8fa;
--bg-section: #ffffff;
--bg-entry: #eaf3ff;
--text: #222222;
--muted: #555555;
--accent: #2a7ae2;
--shadow: #00000011;
--border-soft: #d0d7e2;
}

@media (prefers-color-scheme: dark) {
:root {
--bg: #0f172a;
--bg-section: #111827;
--bg-entry: #1e293b;
--text: #e5e7eb;
--muted: #9ca3af;
--accent: #60a5fa;
--shadow: #00000066;
--border-soft: #374151;
}
}

body {
font-family: Arial, sans-serif;
margin: 0;
background: var(--bg);
color: var(--text);
}

/* PIN LOCK */
#lockScreen {
position: fixed;
inset: 0;
background: radial-gradient(circle at top, #1d4ed8 0, #020617 55%);
color: #e5e7eb;
display: flex;
align-items: center;
justify-content: center;
padding: 2rem 1rem;
z-index: 1000;
}

#lockInner {
width: 100%;
max-width: 360px;
background: rgba(15, 23, 42, 0.9);
border-radius: 18px;
padding: 1.5rem 1.3rem 1.7rem;
box-shadow: 0 20px 40px #000000aa;
border: 1px solid rgba(148, 163, 184, 0.5);
}

#lockTitle {
font-family: Georgia, serif;
font-size: 1.6rem;
text-align: center;
margin: 0 0 0.25rem;
}

#lockSubtitle {
text-align: center;
color: #9ca3af;
margin-bottom: 1.25rem;
}

#pinInput {
width: 100%;
font-size: 1.4rem;
padding: 0.65rem 0.75rem;
text-align: center;
border-radius: 10px;
border: 1px solid #4b5563;
background: #020617;
color: #e5e7eb;
letter-spacing: 0.3em;
font-weight: bold;
margin-bottom: 0.75rem;
}

#lockButtons {
display: flex;
gap: 0.75rem;
}

.lock-btn {
flex: 1;
border-radius: 999px;
padding: 0.55rem 0.75rem;
border: none;
cursor: pointer;
}

#btnConfirmPin {
background: linear-gradient(135deg, #2563eb, #38bdf8);
color: #fff;
}

#btnResetPin {
background: transparent;
color: #9ca3af;
border: 1px solid #4b5563;
}

#app {
display: none;
}

.container {
max-width: 500px;
margin: 0 auto;
padding: 1em;
}

h1, h2, h3 {
color: var(--accent);
font-family: Georgia, serif;
}

h1 {
text-align: center;
}

#todayDate {
text-align: center;
color: var(--muted);
margin-bottom: 0.7em;
font-family: Georgia, serif;
}

.quote {
font-style: italic;
color: var(--muted);
margin-bottom: 1em;
padding: 0.75em;
background: var(--bg-section);
border-radius: 6px;
text-align: center;
}

.section {
background: var(--bg-section);
border-radius: 10px;
padding: 1em;
margin-bottom: 1em;
box-shadow: 0 2px 10px var(--shadow);
border: 1px solid var(--border-soft);
}

.helper-text {
font-size: 0.85em;
color: var(--muted);
margin-top: -0.4em;
margin-bottom: 0.8em;
}

label {
font-weight: bold;
margin-top: 0.9em;
display: block;
}

textarea,
input[type="text"] {
width: 100%;
padding: 0.5em;
border-radius: 6px;
border: 1px solid var(--border-soft);
background: var(--bg);
color: var(--text);
margin-bottom: 0.8em;
}

.mood-options {
display: flex;
justify-content: space-between;
margin-top: 0.5em;
font-size: 1.8rem;
cursor: pointer;
}

.mood-option {
opacity: 0.5;
transition: 0.2s;
}

.mood-option.selected {
opacity: 1;
transform: scale(1.2);
}

button {
background: var(--accent);
color: #fff;
border: none;
padding: 1em 1.5em;
border-radius: 8px;
font-size: 1.1em;
cursor: pointer;
width: 100%;
margin-top: 1em;
}

.entry {
background: var(--bg-entry);
border-radius: 6px;
padding: 0.7em;
margin-bottom: 1em;
border: 1px solid var(--border-soft);
}
</style>
</head>

<body>

<!-- PIN LOCK -->
<div id="lockScreen">
<div id="lockInner">
<h1 id="lockTitle">My Diary</h1>
<div id="lockSubtitle">Protected with a personal PIN</div>

<div id="lockModeLabel">Set a new 4-digit PIN</div>
<input id="pinInput" type="password" maxlength="4" inputmode="numeric" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢">

<div id="lockButtons">
<button id="btnConfirmPin" class="lock-btn">Confirm</button>
<button id="btnResetPin" class="lock-btn">Reset PIN</button>
</div>

<div id="lockError"></div>
</div>
</div>

<!-- APP -->
<div id="app">
<div class="container">

<h1>My Diary</h1>
<div id="todayDate"></div>
<div class="quote" id="quote"></div>

<form id="diaryForm">

<!-- VALUES -->
<div class="section">
<h2>Values</h2>
<div class="helper-text">Did I live up to my values?</div>

<label><input type="checkbox" name="values" value="Fearlessness & Respect"> Fearlessness & Respect</label>
<label><input type="checkbox" name="values" value="Gratitude & Sincerity"> Gratitude & Sincerity</label>
<label><input type="checkbox" name="values" value="Humility & Trustworthiness"> Humility & Trustworthiness</label>
<label><input type="checkbox" name="values" value="Love & Hope"> Love & Hope</label>
<label><input type="checkbox" name="values" value="Perform & Produce"> Perform & Produce</label>
</div>

<!-- FITNESS -->
<div class="section">
<h2>Fitness</h2>
<div class="helper-text">Did I stay fit?</div>

<label>Body</label>
<input type="text" name="body">

<label>Mind</label>
<input type="text" name="mind">

<label>Heart</label>
<input type="text" name="heart">

<label>Soul</label>
<input type="text" name="soul">
</div>

<!-- MOOD -->
<div class="section">
<h2>Mood</h2>
<div class="helper-text">How was my mood?</div>

<div class="mood-options">
<span class="mood-option" data-mood="üòÑ">üòÑ</span>
<span class="mood-option" data-mood="üôÇ">üôÇ</span>
<span class="mood-option" data-mood="üòê">üòê</span>
<span class="mood-option" data-mood="üôÅ">üôÅ</span>
<span class="mood-option" data-mood="üò¢">üò¢</span>
</div>
<input type="hidden" name="mood" id="moodInput">
</div>

<!-- ENTRY -->
<div class="section">
<h2>Entry</h2>
<textarea name="diaryEntry" rows="4"></textarea>
</div>

<!-- EFFECTIVENESS -->
<div class="section">
<h2>Effectiveness</h2>

<label>Gratitude 1</label>
<input type="text" name="grat1">

<label>Gratitude 2</label>
<input type="text" name="grat2">

<label>Gratitude 3</label>
<input type="text" name="grat3">

<label>Kindness</label>
<textarea name="kindness" rows="2"></textarea>

<label>Commitments</label>
<textarea name="commitments" rows="2"></textarea>

<label>Goals</label>
<textarea name="goals" rows="2"></textarea>
</div>

<button type="submit">Save today's entry</button>
</form>

<div class="history">
<h2>Previous Entries</h2>
<div id="entries"></div>
</div>

</div>
</div>

<script>
/* PIN LOCK */
const PIN_KEY = "diaryPin_v1";
const lockScreen = document.getElementById("lockScreen");
const app = document.getElementById("app");
const pinInput = document.getElementById("pinInput");
const btnConfirmPin = document.getElementById("btnConfirmPin");
const btnResetPin = document.getElementById("btnResetPin");
const lockModeLabel = document.getElementById("lockModeLabel");
const lockError = document.getElementById("lockError");

function unlock() {
lockScreen.style.display = "none";
app.style.display = "block";
}

function initLock() {
const stored = localStorage.getItem(PIN_KEY);
lockModeLabel.textContent = stored ? "Enter your 4-digit PIN" : "Set a new 4-digit PIN";

btnConfirmPin.onclick = () => {
const entered = pinInput.value.trim();
if (entered.length !== 4) {
lockError.textContent = "PIN must be 4 digits.";
return;
}

const saved = localStorage.getItem(PIN_KEY);

if (!saved) {
localStorage.setItem(PIN_KEY, entered);
unlock();
} else {
if (entered === saved) unlock();
else lockError.textContent = "Incorrect PIN.";
}
};

btnResetPin.onclick = () => {
localStorage.removeItem(PIN_KEY);
lockModeLabel.textContent = "Set a new 4-digit PIN";
pinInput.value = "";
};
}

initLock();

/* DATE */
document.getElementById("todayDate").textContent =
new Date().toLocaleDateString("en-US", {
weekday: "long",
year: "numeric",
month: "long",
day: "numeric"
});

/* QUOTES */
const quotes = [
"Seek, find, and make a decisive impact to brighten the day and improve the world!",
"I promote equality, tolerance, and sound judgment ‚Äì humbly and responsibly.",
"I pursue my dream persistently despite adversity, pressure, and criticism.",
"Tough on results & gentle with people.",
"True to myself & expressing my feelings.",
"Can do & do it attitude!"
];
document.getElementById("quote").textContent =
quotes[Math.floor(Math.random() * quotes.length)];

/* MOOD TRACKER */
const moodOptions = document.querySelectorAll(".mood-option");
const moodInput = document.getElementById("moodInput");

moodOptions.forEach(opt => {
opt.addEventListener("click", () => {
moodOptions.forEach(o => o.classList.remove("selected"));
opt.classList.add("selected");
moodInput.value = opt.dataset.mood;
});
});

/* SAVE + LOAD ENTRIES */
const form = document.getElementById("diaryForm");
const entriesDiv = document.getElementById("entries");

function loadEntries() {
entriesDiv.innerHTML = "";
const entries = JSON.parse(localStorage.getItem("diaryEntries") || "[]");

entries.slice().reverse().forEach(entry => {
const div = document.createElement("div");
div.className = "entry";

div.innerHTML = `
<b>${entry.date}</b><br>
<b>Mood:</b> ${entry.mood || "‚Äî"}<br><br>
<b>Values:</b> ${entry.values.join(", ")}<br>
<b>Body:</b> ${entry.body}<br>
<b>Mind:</b> ${entry.mind}<br>
<b>Heart:</b> ${entry.heart}<br>
<b>Soul:</b> ${entry.soul}<br><br>
<b>Entry:</b> ${entry.diaryEntry}<br><br>
<b>Gratitude:</b><br>
1) ${entry.grat1}<br>
2) ${entry.grat2}<br>
3) ${entry.grat3}<br><br>
<b>Kindness:</b> ${entry.kindness}<br>
<b>Commitments:</b> ${entry.commitments}<br>
<b>Goals:</b> ${entry.goals}
`;

entriesDiv.appendChild(div);
});
}

form.onsubmit = e => {
e.preventDefault();
const data = new FormData(form);

const entry = {
date: new Date().toLocaleDateString("en-US", {
weekday: "long",
year: "numeric",
month: "long",
day: "numeric"
}),
values: data.getAll("values"),
body: data.get("body") || "",
mind: data.get("mind") || "",
heart: data.get("heart") || "",
soul: data.get("soul") || "",
mood: data.get("mood") || "",
diaryEntry: data.get("diaryEntry") || "",
grat1: data.get("grat1") || "",
grat2: data.get("grat2") || "",
grat3: data.get("grat3") || "",
kindness: data.get("kindness") || "",
commitments: data.get("commitments") || "",
goals: data.get("goals") || ""
};

const entries = JSON.parse(localStorage.getItem("diaryEntries") || "[]");
entries.push(entry);
localStorage.setItem("diaryEntries", JSON.stringify(entries));

form.reset();
moodOptions.forEach(o => o.classList.remove("selected"));
loadEntries();
alert("Today's entry has been saved!");
};

loadEntries();

if ("serviceWorker" in navigator) {
navigator.serviceWorker.register("sw.js");
}
</script>

</body>
</html>
